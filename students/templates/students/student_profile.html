{% extends 'base.html' %}
{% block content %}
<div class="container mt-5">
    <h1 class="text-center mb-4">My Profile</h1>
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">Ã—</span>
                </button>
            </div>
        {% endfor %}
    {% endif %}

    <div class="card shadow-sm">
        <div class="card-header bg-primary text-white text-center">
            <h4>Profile Overview</h4>
        </div>
        <div class="card-body">
            <div class="text-center mb-4">
                <img src="{% if student.profile_picture %}{{ student.profile_picture.url }}{% else %}/static/images/default-profile.png{% endif %}" alt="Profile Picture" class="img-thumbnail rounded-circle" style="max-width: 200px;">
                <h5 class="mt-3">{{ student.name }}</h5>
                <p class="text-muted">Roll Number: {{ student.roll_number }}</p>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <p><strong>Phone:</strong> {{ student.phone|default:'Not provided' }}</p>
                    <p><strong>Address:</strong> {{ student.address|default:'Not provided' }}</p>
                    <p><strong>Father's Name:</strong> {{ student.father_name|default:'Not provided' }}</p>
                    <p><strong>Mother's Name:</strong> {{ student.mother_name|default:'Not provided' }}</p>
                </div>
                <div class="col-md-6">
                    <p><strong>Parent Phone:</strong> {{ student.parent_phone|default:'Not provided' }}</p>
                    <p><strong>Community:</strong> {{ student.community|default:'Not provided' }}</p>
                    <p><strong>Place of Birth:</strong> {{ student.place_of_birth|default:'Not provided' }}</p>
                    <p><strong>Admission Date:</strong> {{ student.admission_date|date:'Y-m-d'|default:'Not provided' }}</p>
                    <p><strong>Admission Type:</strong> {{ student.admission_type|default:'Not provided' }}</p>
                    <p><strong>Gender:</strong> {{ student.gender|default:'Not provided' }}</p>
                </div>
            </div>
            <div class="text-center mt-4">
                <a href="{% url 'students:edit_student_profile' %}" class="btn btn-primary">Edit Profile</a>
            </div>
            <p class="text-danger text-center mt-3">{% if not student.phone or not student.address or not student.father_name or not student.mother_name or not student.parent_phone or not student.community or not student.place_of_birth or not student.admission_date or not student.admission_type or not student.gender %}
                Complete your profile to unlock full features!
            {% endif %}</p>
        </div>
    </div>
</div>
{% endblock %}